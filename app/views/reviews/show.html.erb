<div class="min-h-screen bg-gray-50 py-12">
  <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
    <!-- Header -->
    <div class="mb-12 text-center">
      <h1 class="text-4xl font-bold tracking-tight text-gray-900 sm:text-5xl">Customer Reviews</h1>
      <p class="mt-4 text-lg text-gray-600">See what our customers are saying about their experience with us</p>
    </div>

    <% if @reviews.any? %>
      <!-- Reviews Grid -->
      <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
        <% @reviews.each do |review| %>
          <article class="rounded-2xl border border-gray-200 bg-white p-6 shadow-sm transition hover:shadow-md">
            <!-- Rating -->
            <div class="mb-4 flex items-center justify-between">
              <div class="flex items-center gap-1">
                <%= render_rating_stars(review.rating) %>
              </div>
              <time datetime="<%= review.created_at.iso8601 %>" class="text-sm text-gray-500">
                <%= review.created_at.strftime("%b %d, %Y") %>
              </time>
            </div>

            <!-- Comment -->
            <% if review.comment.present? %>
              <blockquote class="mb-4 text-gray-700">
                <p class="line-clamp-4"><%= review.comment %></p>
              </blockquote>
            <% end %>

            <!-- Product Link -->
            <div class="mt-4 border-t border-gray-100 pt-4">
              <%= link_to review.product, class: "group flex items-center gap-3" do %>
                <% if review.product.image.attached? %>
                  <%= image_tag review.product.image.variant(resize_to_fill: [80, 80]), 
                      alt: review.product.name, 
                      class: "h-12 w-12 rounded-lg object-cover" %>
                <% else %>
                  <div class="flex h-12 w-12 items-center justify-center rounded-lg bg-gray-100 text-gray-400">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                    </svg>
                  </div>
                <% end %>
                <div class="flex-1 min-w-0">
                  <p class="truncate text-sm font-semibold text-gray-900 group-hover:text-blue-600">
                    <%= review.product.name %>
                  </p>
                  <p class="text-sm text-gray-500">
                    <%= format_money(review.product.price) %>
                  </p>
                </div>
              <% end %>
            </div>

            <!-- Reviewer Info -->
            <div class="mt-4 flex items-center gap-2">
              <%= user_avatar_tag(review.user, size: :sm) %>
              <div>
                <p class="text-sm font-medium text-gray-900"><%= review.user.name %></p>
                <p class="text-xs text-gray-500">Verified Customer</p>
              </div>
            </div>
          </article>
        <% end %>
      </div>

      <!-- Pagination -->
      <% if @pagy.pages > 1 %>
        <div class="mt-12 flex justify-center">
          <%== pagy_nav(@pagy) if defined?(@pagy) %>
        </div>
      <% end %>
    <% else %>
      <!-- Empty State -->
      <div class="mx-auto max-w-md text-center">
        <div class="mx-auto mb-6 flex h-24 w-24 items-center justify-center rounded-full bg-gray-100">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z" />
          </svg>
        </div>
        <h2 class="mb-2 text-2xl font-semibold text-gray-900">No reviews yet</h2>
        <p class="mb-6 text-gray-600">Be the first to share your experience with our products!</p>
        <%= link_to "Browse Products", products_path, class: "inline-flex items-center justify-center rounded-full bg-blue-600 px-6 py-3 text-sm font-semibold text-white transition hover:bg-blue-700" %>
      </div>
    <% end %>

    <!-- CTA Section -->
    <div class="mt-16 rounded-2xl bg-gradient-to-r from-blue-600 to-indigo-600 p-8 text-center text-white">
      <h2 class="mb-4 text-2xl font-bold">Share Your Experience</h2>
      <p class="mb-6 text-blue-100">Help others discover great products by leaving a review</p>
      <%= link_to "Shop Now", products_path, class: "inline-flex items-center justify-center rounded-full bg-white px-6 py-3 text-sm font-semibold text-blue-600 transition hover:bg-gray-100" %>
    </div>
  </div>
</div>
