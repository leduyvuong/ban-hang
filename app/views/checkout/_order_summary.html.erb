<div class="space-y-4 rounded-3xl border border-gray-200 bg-white p-6 shadow-sm">
  <div class="flex items-center justify-between">
    <h2 class="text-lg font-semibold text-gray-900">Order summary</h2>
    <span class="rounded-full bg-indigo-50 px-3 py-1 text-xs font-semibold text-indigo-600"><%= pluralize(cart.total_items, "item") %></span>
  </div>

  <ul class="space-y-3 text-sm text-gray-600">
    <% cart.items_with_products.each do |item| %>
      <li class="flex items-center justify-between">
        <div>
          <p class="font-semibold text-gray-900"><%= item.product.name %></p>
          <p class="text-xs text-gray-500">Qty: <%= item.quantity %></p>
        </div>
          <% if item.discount_applied? %>
            <div class="text-right">
              <span class="block text-xs text-gray-400 line-through"><%= format_money(item.regular_subtotal) %></span>
              <span class="font-semibold text-emerald-600"><%= format_money(item.subtotal) %></span>
            </div>
          <% else %>
            <span class="font-semibold text-gray-900"><%= format_money(item.subtotal) %></span>
          <% end %>
      </li>
    <% end %>
  </ul>

  <% savings = cart.discount_total %>
  <% has_savings = savings.positive? %>
  <% regular_total = cart.regular_total %>
  <% total_due = cart.subtotal %>

  <div class="space-y-2 text-sm">
    <div class="flex items-center justify-between text-gray-500">
      <span>Merchandise (before discounts)</span>
      <span>
        <% if has_savings %>
          <span class="text-xs text-gray-400 line-through"><%= format_money(regular_total) %></span>
        <% else %>
          <span class="font-semibold text-gray-900"><%= format_money(total_due) %></span>
        <% end %>
      </span>
    </div>
    <% if has_savings %>
      <div class="flex items-center justify-between text-emerald-600">
        <span>Discount savings</span>
        <span>âˆ’<%= format_money(savings) %></span>
      </div>
    <% end %>
    <div class="flex items-center justify-between text-gray-400 text-xs">
      <span>Shipping</span>
      <span>Calculated at delivery</span>
    </div>
    <div class="flex items-center justify-between border-t border-gray-200 pt-3 text-base font-semibold text-gray-900">
      <span>Total</span>
      <span><%= format_money(total_due) %></span>
    </div>
  </div>

  <% if has_savings %>
    <p class="text-xs font-medium uppercase tracking-wide text-emerald-600">You saved <%= format_money(savings) %> on this order</p>
  <% end %>
</div>
