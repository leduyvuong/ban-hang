<div class="space-y-8">
  <div class="max-w-3xl space-y-3">
    <h1 class="text-3xl font-bold text-gray-900">Products</h1>
    <p class="text-base text-gray-600">Discover hand-picked Vietnamese goods, then filter or sort the catalogue to see the most relevant items for you.</p>
  </div>

  <div class="grid gap-8 lg:grid-cols-[280px_1fr]">
    <aside class="space-y-6 rounded-2xl border border-gray-200 bg-white p-6 shadow-sm">
      <%= form_with url: products_path, method: :get, data: { controller: "product-filters", turbo_frame: "product_list" }, class: "space-y-6" do |form| %>
        <section class="space-y-4">
          <h2 class="text-lg font-semibold text-gray-900">Filter by category</h2>
          <fieldset class="space-y-3">
            <legend class="sr-only">Product category</legend>
            <% category_filters.each do |key, details| %>
              <label class="flex cursor-pointer items-start gap-3 rounded-xl border border-gray-200 px-4 py-3 text-sm transition hover:border-indigo-400 <%= 'ring-2 ring-indigo-500 border-indigo-500 bg-indigo-50/60' if key == @selected_category %>">
                <%= form.radio_button :category, key, checked: key == @selected_category, class: "mt-1", data: { action: "change->product-filters#submit" } %>
                <span>
                  <span class="font-medium text-gray-900"><%= details[:name] %></span>
                  <span class="block text-gray-500"><%= details[:description] %></span>
                </span>
              </label>
            <% end %>
          </fieldset>
        </section>

        <section class="space-y-2">
          <h2 class="text-lg font-semibold text-gray-900">Sort products</h2>
          <div class="relative">
            <label for="sort" class="sr-only">Sort products</label>
            <%= form.select :sort, sort_options.map { |value, label| [label, value] }, { selected: @selected_sort }, class: "w-full rounded-xl border border-gray-300 bg-white py-2 pl-4 pr-10 text-sm focus:border-indigo-500 focus:outline-none", data: { action: "change->product-filters#submit" } %>
            <span class="pointer-events-none absolute inset-y-0 right-3 flex items-center text-gray-400">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-5 w-5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25 12 15.75 4.5 8.25" />
              </svg>
            </span>
          </div>
        </section>

        <div class="flex flex-col gap-3 rounded-xl bg-indigo-50/60 p-4 text-sm text-indigo-900">
          <h2 class="text-base font-semibold text-indigo-900">SEO tip</h2>
          <p>Filters use query parameters like <code>?category=budget</code>, and each filtered response includes a canonical link back to the main listing. This keeps search engines focused on a single authoritative URL while still letting shoppers browse variations.</p>
          <button type="submit" class="w-full rounded-full bg-indigo-600 px-4 py-2 text-sm font-semibold text-white transition hover:bg-indigo-500">Apply filters</button>
        </div>
      <% end %>
    </aside>

    <div class="space-y-6">
      <turbo-frame id="product_list">
        <%= render partial: "product_grid", locals: { products: @products } %>
      </turbo-frame>
    </div>
  </div>
</div>
